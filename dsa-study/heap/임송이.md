# Heap (í™)

## 1. í™ì´ë€?

**í™(Heap)**ì€ **ì™„ì „ ì´ì§„ íŠ¸ë¦¬** ê¸°ë°˜ì˜ ìë£Œêµ¬ì¡°ë‹¤. **í™ ì†ì„±(Heap Property)**ì„ ë§Œì¡±í•´ì•¼ í•œë‹¤.

### í™ì˜ ì¢…ë¥˜

- **ìµœëŒ€ í™(Max Heap)**: ë¶€ëª¨ ë…¸ë“œ â‰¥ ìì‹ ë…¸ë“œ (ë£¨íŠ¸ê°€ ìµœëŒ“ê°’)
- **ìµœì†Œ í™(Min Heap)**: ë¶€ëª¨ ë…¸ë“œ â‰¤ ìì‹ ë…¸ë“œ (ë£¨íŠ¸ê°€ ìµœì†Ÿê°’)

```
Max Heap (ìµœëŒ€ í™)
ë¶€ëª¨ ë…¸ë“œ >= ìì‹ ë…¸ë“œ
     9
   /   \
  7     8
 / \   /
4   5 6

Min Heap (ìµœì†Œ í™)
ë¶€ëª¨ ë…¸ë“œ <= ìì‹ ë…¸ë“œ
     1
   /   \
  2     3
 / \   /
4   5 6
```

### í•µì‹¬ ìš©ì–´ ì •ë¦¬

| ìš©ì–´                     | ì˜ë¯¸           | ì„¤ëª…                                         |
| ------------------------ | -------------- | -------------------------------------------- |
| **Root**                 | ë£¨íŠ¸ ë…¸ë“œ      | í™ì˜ ìµœìƒë‹¨ ë…¸ë“œ (ìµœëŒ“ê°’/ìµœì†Ÿê°’)             |
| **Leaf**                 | ë¦¬í”„ ë…¸ë“œ      | ìì‹ì´ ì—†ëŠ” ë…¸ë“œ                             |
| **Heapify**              | í™í™”           | í™ ì†ì„±ì„ ë§Œì¡±í•˜ë„ë¡ ì¬ì •ë ¬í•˜ëŠ” ê³¼ì •         |
| **Bubble Up**            | ìœ„ë¡œ ë²„ë¸”ë§    | ì‚½ì… ì‹œ ë¶€ëª¨ì™€ ë¹„êµí•˜ë©° ì˜¬ë¼ê°€ëŠ” ê³¼ì •        |
| **Bubble Down**          | ì•„ë˜ë¡œ ë²„ë¸”ë§  | ì‚­ì œ ì‹œ ìì‹ê³¼ ë¹„êµí•˜ë©° ë‚´ë ¤ê°€ëŠ” ê³¼ì •        |
| **Complete Binary Tree** | ì™„ì „ ì´ì§„ íŠ¸ë¦¬ | ë§ˆì§€ë§‰ ë ˆë²¨ ì œì™¸í•˜ê³  ëª¨ë“  ë ˆë²¨ì´ ì±„ì›Œì§„ íŠ¸ë¦¬ |

### ì™„ì „ ì´ì§„ íŠ¸ë¦¬ë€?

ë§ˆì§€ë§‰ ë ˆë²¨ì„ ì œì™¸í•œ ëª¨ë“  ë ˆë²¨ì´ ì™„ì „íˆ ì±„ì›Œì ¸ ìˆê³ , ë§ˆì§€ë§‰ ë ˆë²¨ì€ ì™¼ìª½ë¶€í„° ì±„ì›Œì§„ íŠ¸ë¦¬ë‹¤.

```
ì™„ì „ ì´ì§„ íŠ¸ë¦¬ ì˜ˆì‹œ:
      1
     / \
    2   3
   / \ /
  4  5 6

ë¹„ì™„ì „ ì´ì§„ íŠ¸ë¦¬ (í™ì—ì„œ ì‚¬ìš© ë¶ˆê°€):
      1
     / \
    2   3
     \   \
      5   6
```

## 2. í™ì˜ íŠ¹ì§•

### êµ¬ì¡°ì  íŠ¹ì§•

- **ì™„ì „ ì´ì§„ íŠ¸ë¦¬** êµ¬ì¡°ë¥¼ ìœ ì§€í•œë‹¤
- **ë°°ì—´ë¡œ êµ¬í˜„**ì´ ê°€ëŠ¥í•˜ë‹¤ (í¬ì¸í„° ë¶ˆí•„ìš”)
- ë†’ì´ê°€ **log n**ì´ë‹¤ (nê°œ ë…¸ë“œì¼ ë•Œ)

### ë°°ì—´ ì¸ë±ìŠ¤ ê´€ê³„

```javascript
// ì¸ë±ìŠ¤ iì—ì„œ
ë¶€ëª¨ ì¸ë±ìŠ¤: Math.floor((i-1) / 2)
ì™¼ìª½ ìì‹: 2*i + 1
ì˜¤ë¥¸ìª½ ìì‹: 2*i + 2

// ë°°ì—´: [1, 2, 3, 4, 5, 6]
// ì¸ë±ìŠ¤: 0, 1, 2, 3, 4, 5
//
//       1(0)
//      /    \
//    2(1)   3(2)
//   /  \    /
// 4(3) 5(4) 6(5)
```

## 3. ì£¼ìš” ì—°ì‚°ë“¤

### ì‚½ì… (Insert) - O(log n)

```
1. ë°°ì—´ ë§¨ ëì— ìš”ì†Œ ì¶”ê°€ (ì™„ì „ ì´ì§„ íŠ¸ë¦¬ ìœ ì§€)
2. Heapify Up (ë²„ë¸” ì—…) ìˆ˜í–‰

ì˜ˆì‹œ: MinHeap [1,2,3,4,5]ì— 0 ì‚½ì…
Step 1: [1,2,3,4,5,0] (ë§¨ ëì— ì¶”ê°€)
Step 2: 0ê³¼ ë¶€ëª¨ 2 ë¹„êµ â†’ êµí™˜ â†’ [1,0,3,4,5,2]
Step 3: 0ê³¼ ë¶€ëª¨ 1 ë¹„êµ â†’ êµí™˜ â†’ [0,2,3,4,5,1]
```

### ì‚­ì œ (Extract) - O(log n)

```
1. ë£¨íŠ¸ ìš”ì†Œ ì œê±° (ìµœëŒ“ê°’/ìµœì†Ÿê°’)
2. ë§ˆì§€ë§‰ ìš”ì†Œë¥¼ ë£¨íŠ¸ë¡œ ì´ë™
3. Heapify Down (ë²„ë¸” ë‹¤ìš´) ìˆ˜í–‰

ì˜ˆì‹œ: MinHeap [1,2,3,4,5,6]ì—ì„œ ìµœì†Ÿê°’ ì œê±°
Step 1: 1 ì œê±°, 6ì„ ë£¨íŠ¸ë¡œ â†’ [6,2,3,4,5]
Step 2: 6ê³¼ ìì‹ë“¤(2,3) ë¹„êµ â†’ ë” ì‘ì€ 2ì™€ êµí™˜ â†’ [2,6,3,4,5]
Step 3: 6ê³¼ ìì‹ë“¤(4,5) ë¹„êµ â†’ ë” ì‘ì€ 4ì™€ êµí™˜ â†’ [2,4,3,6,5]
```

### Heapify Up (ìƒí–¥ í™í™”)

- ì‚½ì…ëœ ë…¸ë“œë¥¼ ë¶€ëª¨ì™€ ë¹„êµí•˜ë©° ìœ„ë¡œ ì´ë™
- í™ ì†ì„±ì´ ë§Œì¡±ë  ë•Œê¹Œì§€ ë°˜ë³µ
- ìµœì•…ì˜ ê²½ìš° ë£¨íŠ¸ê¹Œì§€ ì˜¬ë¼ê° (log n)

### Heapify Down (í•˜í–¥ í™í™”)

- ë£¨íŠ¸ì—ì„œ ì‹œì‘í•´ ìì‹ë“¤ê³¼ ë¹„êµí•˜ë©° ì•„ë˜ë¡œ ì´ë™
- ë” ì‘ì€/í° ìì‹ê³¼ êµí™˜í•˜ë©° í™ ì†ì„± ë³µêµ¬
- ìµœì•…ì˜ ê²½ìš° ë¦¬í”„ê¹Œì§€ ë‚´ë ¤ê° (log n)

## 4. ì‹œê°„ ë³µì¡ë„

| ì—°ì‚°                 | ì‹œê°„ ë³µì¡ë„ | ê³µê°„ ë³µì¡ë„ | ì„¤ëª…                               |
| -------------------- | ----------- | ----------- | ---------------------------------- |
| **peek()**           | O(1)        | O(1)        | ë£¨íŠ¸ ìš”ì†Œë§Œ ë°˜í™˜                   |
| **insert()**         | O(log n)    | O(1)        | ìµœëŒ€ íŠ¸ë¦¬ ë†’ì´ë§Œí¼ ë²„ë¸” ì—…         |
| **extractMin/Max()** | O(log n)    | O(1)        | ìµœëŒ€ íŠ¸ë¦¬ ë†’ì´ë§Œí¼ ë²„ë¸” ë‹¤ìš´       |
| **buildHeap()**      | O(n)        | O(1)        | ìƒí–¥ì‹ í™ êµ¬ì„±ì´ ë” íš¨ìœ¨ì          |
| **heapSort()**       | O(n log n)  | O(1)        | í™ êµ¬ì„± O(n) + në²ˆ ì¶”ì¶œ O(n log n) |

### buildHeapì´ O(n)ì¸ ì´ìœ 

```
ì „ì²´ ë…¸ë“œì˜ ì ˆë°˜ì€ ë¦¬í”„ ë…¸ë“œ â†’ ì´ë™ ê±°ë¦¬ 0
1/4ì€ ë†’ì´ 1ì—ì„œ ì‹œì‘ â†’ ìµœëŒ€ 1ë²ˆ ì´ë™
1/8ì€ ë†’ì´ 2ì—ì„œ ì‹œì‘ â†’ ìµœëŒ€ 2ë²ˆ ì´ë™
...
ìˆ˜í•™ì ìœ¼ë¡œ ê³„ì‚°í•˜ë©´ O(n) ì‹œê°„ ë³µì¡ë„
```

## 5. ì‹¤ì œ í™œìš© ì‚¬ë¡€

### ìš°ì„ ìˆœìœ„ í (Priority Queue)

```javascript
// ì‘ì—… ìŠ¤ì¼€ì¤„ë§
const taskQueue = new PriorityQueue();
taskQueue.enqueue("ê¸´ê¸‰ ë²„ê·¸ ìˆ˜ì •", 1);
taskQueue.enqueue("ê¸°ëŠ¥ ê°œë°œ", 3);
taskQueue.enqueue("ë³´ì•ˆ íŒ¨ì¹˜", 0);

// í”„ë¡œì„¸ìŠ¤ ìŠ¤ì¼€ì¤„ë§
const processQueue = new PriorityQueue();
processQueue.enqueue("ì‹œìŠ¤í…œ í”„ë¡œì„¸ìŠ¤", 0);
processQueue.enqueue("ì‚¬ìš©ì ì•±", 2);
```

### ì•Œê³ ë¦¬ì¦˜ì—ì„œ í™œìš©

- **ë‹¤ìµìŠ¤íŠ¸ë¼ ì•Œê³ ë¦¬ì¦˜**: ìµœë‹¨ ê²½ë¡œ ì°¾ê¸°ì—ì„œ ë‹¤ìŒ ë°©ë¬¸í•  ë…¸ë“œ ì„ íƒ
- **í—ˆí”„ë§Œ ì½”ë”©**: ë°ì´í„° ì••ì¶•ì—ì„œ ë¹ˆë„ ê¸°ë°˜ íŠ¸ë¦¬ êµ¬ì„±
- **A\* ì•Œê³ ë¦¬ì¦˜**: ê²½ë¡œ íƒìƒ‰ì—ì„œ f(n) = g(n) + h(n) ê¸°ì¤€ìœ¼ë¡œ ë…¸ë“œ ì„ íƒ
- **í”„ë¦¼ ì•Œê³ ë¦¬ì¦˜**: ìµœì†Œ ì‹ ì¥ íŠ¸ë¦¬ì—ì„œ ìµœì†Œ ê°€ì¤‘ì¹˜ ê°„ì„  ì„ íƒ

### ì‹œìŠ¤í…œ í”„ë¡œê·¸ë˜ë°

- **ìš´ì˜ì²´ì œ ìŠ¤ì¼€ì¤„ë§**: CPU ìŠ¤ì¼€ì¤„ë§, I/O ìŠ¤ì¼€ì¤„ë§
- **ë©”ëª¨ë¦¬ ê´€ë¦¬**: ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ì—ì„œ ìš°ì„ ìˆœìœ„ ê¸°ë°˜ ì •ë¦¬
- **ë„¤íŠ¸ì›Œí¬**: QoS(Quality of Service)ë¥¼ ìœ„í•œ íŒ¨í‚· ìš°ì„ ìˆœìœ„ ì²˜ë¦¬
- **ì´ë²¤íŠ¸ ì‹œë®¬ë ˆì´ì…˜**: ì‹œê°„ ê¸°ë°˜ ì´ë²¤íŠ¸ ì²˜ë¦¬

## 6. í™ vs ë‹¤ë¥¸ ìë£Œêµ¬ì¡°

| ìë£Œêµ¬ì¡°        | ìµœëŒ“ê°’ ì°¾ê¸° | ì‚½ì…     | ì‚­ì œ     | íŠ¹ì§•                           |
| --------------- | ----------- | -------- | -------- | ------------------------------ |
| **í™**          | O(1)        | O(log n) | O(log n) | ìš°ì„ ìˆœìœ„ íì— ìµœì              |
| **ë°°ì—´**        | O(n)        | O(1)     | O(n)     | ë‹¨ìˆœí•˜ì§€ë§Œ ë¹„íš¨ìœ¨ì             |
| **ì •ë ¬ëœ ë°°ì—´** | O(1)        | O(n)     | O(n)     | ì‚½ì…/ì‚­ì œ ì‹œ ì´ë™ í•„ìš”         |
| **ì—°ê²° ë¦¬ìŠ¤íŠ¸** | O(n)        | O(1)     | O(n)     | íƒìƒ‰ì´ ëŠë¦¼                    |
| **BST**         | O(log n)    | O(log n) | O(log n) | ëª¨ë“  ì—°ì‚°ì´ ê· ë“±í•˜ê²Œ ë¹ ë¦„      |
| **í•´ì‹œ í…Œì´ë¸”** | O(n)        | O(1)     | O(1)     | ìˆœì„œê°€ ì—†ì–´ ìš°ì„ ìˆœìœ„ í ë¶€ì í•© |

## 7. ì£¼ì˜ì‚¬í•­ ë° íŒ

### ì™„ì „ ì´ì§„ íŠ¸ë¦¬ ìœ ì§€

```javascript
// âŒ ì˜ëª»ëœ ë°©ë²•: ì„ì˜ì˜ ìœ„ì¹˜ì— ì‚½ì…
heap[someRandomIndex] = newValue;

// âœ… ì˜¬ë°”ë¥¸ ë°©ë²•: í•­ìƒ ë§ˆì§€ë§‰ì— ì¶”ê°€ í›„ heapify
heap.push(newValue);

heapifyUp();
```

### ë°°ì—´ ì¸ë±ìŠ¤ ê´€ê³„ ì£¼ì˜ì‚¬í•­

```javascript
// âŒ ì˜ëª»ëœ ë¶€ëª¨ ì¸ë±ìŠ¤ ê³„ì‚°
function getParentIndex(index) {
  return (index - 1) / 2; // ì†Œìˆ˜ì  ë‚˜ì˜¬ ìˆ˜ ìˆìŒ
}

// âœ… ì˜¬ë°”ë¥¸ ë¶€ëª¨ ì¸ë±ìŠ¤ ê³„ì‚°
function getParentIndex(index) {
  if (index <= 0) return -1; // ë£¨íŠ¸ëŠ” ë¶€ëª¨ê°€ ì—†ìŒ
  return Math.floor((index - 1) / 2);
}

// âŒ ê²½ê³„ ê²€ì‚¬ ì—†ì´ ì ‘ê·¼
function leftChild(index) {
  return heap[2 * index + 1]; // undefined ê°€ëŠ¥ì„±
}

// âœ… ì•ˆì „í•œ ì ‘ê·¼
function leftChild(index) {
  const childIndex = 2 * index + 1;
  return childIndex < heap.length ? heap[childIndex] : null;
}
```

### í™ì€ ì™„ì „ ì •ë ¬ì´ ì•„ë‹˜

```javascript
// âŒ ì˜ëª»ëœ ê°€ì •: í™ì´ ì™„ì „íˆ ì •ë ¬ë˜ì–´ ìˆë‹¤ê³  ìƒê°
// MinHeap [1, 2, 3, 4, 5, 6]ì—ì„œ
// heap[1] = 2, heap[2] = 3ì´ì§€ë§Œ
// 2ì™€ 3 ì‚¬ì´ì˜ ìˆœì„œëŠ” ë³´ì¥ë˜ì§€ ì•ŠìŒ

// âœ… ì˜¬ë°”ë¥¸ ì´í•´: ë¶€ëª¨-ìì‹ ê´€ê³„ë§Œ ë³´ì¥
// - ë¶€ëª¨ëŠ” í•­ìƒ ìì‹ë³´ë‹¤ ì‘ë‹¤/í¬ë‹¤
// - í˜•ì œ ë…¸ë“œ ê°„ ìˆœì„œëŠ” ë¬´ê´€í•˜ë‹¤
// - ì¤‘ìœ„ ìˆœíšŒí•´ë„ ì •ë ¬ëœ ê²°ê³¼ê°€ ë‚˜ì˜¤ì§€ ì•ŠëŠ”ë‹¤
```

### JavaScript íŠ¹ì • ê³ ë ¤ì‚¬í•­

```javascript
// âŒ ë¹„êµ ì—°ì‚°ì ì£¼ì˜
const heap = ["10", "2", "30"]; // ë¬¸ìì—´ ë°°ì—´
if (heap[0] > heap[1]) {
  // '10' > '2' = false (ë¬¸ìì—´ ë¹„êµ)
  // ì˜ˆìƒê³¼ ë‹¤ë¥¸ ê²°ê³¼
}

// âœ… ìˆ«ìë¡œ í™•ì‹¤íˆ ì²˜ë¦¬
const heap = [10, 2, 30];
// ë˜ëŠ” ë¹„êµ í•¨ìˆ˜ ì‚¬ìš©

// âŒ ì°¸ì¡° íƒ€ì… ë¹„êµ
const heap = [{ value: 1 }, { value: 2 }];
if (heap[0] > heap[1]) {
  // ê°ì²´ ë¹„êµ ë¶ˆê°€
  // ì‘ë™í•˜ì§€ ì•ŠìŒ
}

// âœ… ì»¤ìŠ¤í…€ ë¹„êµ í•¨ìˆ˜ ì‚¬ìš©
class Heap {
  constructor(compareFn = (a, b) => a - b) {
    this.compare = compareFn;
  }

  shouldSwap(parentIndex, childIndex) {
    return this.compare(this.heap[parentIndex], this.heap[childIndex]) > 0;
  }
}
```

## 8. ê³ ê¸‰ í™ ë³€í˜•ë“¤

### ì´ì§„ í™ì˜ í•œê³„ì 

- ì‚½ì…/ì‚­ì œ: O(log n) - ì¶©ë¶„íˆ ë¹ ë¦„
- ë‘ í™ ë³‘í•©: O(n) - ë¹„íš¨ìœ¨ì 
- ì„ì˜ì˜ ì›ì†Œ ì‚­ì œ: O(n) - ì›ì†Œë¥¼ ì°¾ëŠ”ë° O(n)

### ê°œì„ ëœ í™ êµ¬ì¡°ë“¤

```
ğŸ“š ê³ ê¸‰ í™ ìë£Œêµ¬ì¡°ë“¤:

1. ì´í•­ í™ (Binomial Heap)
   - ë³‘í•©: O(log n)
   - ì—¬ëŸ¬ í™ì„ íš¨ìœ¨ì ìœ¼ë¡œ í•©ì¹  ë•Œ ì‚¬ìš©

2. í”¼ë³´ë‚˜ì¹˜ í™ (Fibonacci Heap)
   - ì‚½ì…: O(1) amortized
   - í‚¤ ê°ì†Œ: O(1) amortized
   - ë‹¤ìµìŠ¤íŠ¸ë¼, í”„ë¦¼ ì•Œê³ ë¦¬ì¦˜ì—ì„œ ì´ë¡ ì  ìµœì 

3. í˜ì–´ë§ í™ (Pairing Heap)
   - í”¼ë³´ë‚˜ì¹˜ í™ë³´ë‹¤ êµ¬í˜„ì´ ê°„ë‹¨
   - ì‹¤ì œ ì„±ëŠ¥ì´ ë” ì¢‹ì„ ìˆ˜ ìˆìŒ

4. d-ì§„ í™ (d-ary Heap)
   - ê° ë…¸ë“œê°€ dê°œì˜ ìì‹ì„ ê°€ì§
   - ìºì‹œ íš¨ìœ¨ì„± ê°œì„  ê°€ëŠ¥
```

## 9. ì‹¤ì „ ë¬¸ì œ í•´ê²° íŒ¨í„´

### Top K íŒ¨í„´

```javascript
// ê°€ì¥ í° Kê°œ ì›ì†Œ â†’ MinHeap ì‚¬ìš© (í¬ê¸° K ìœ ì§€)
// ê°€ì¥ ì‘ì€ Kê°œ ì›ì†Œ â†’ MaxHeap ì‚¬ìš© (í¬ê¸° K ìœ ì§€)

function topKFrequent(nums, k) {
  const freq = new Map();
  nums.forEach((num) => freq.set(num, (freq.get(num) || 0) + 1));

  const minHeap = new MinHeap();
  for (let [num, count] of freq) {
    if (minHeap.size() < k) {
      minHeap.insert({ num, count });
    } else if (count > minHeap.peek().count) {
      minHeap.extractMin();
      minHeap.insert({ num, count });
    }
  }

  return minHeap.toArray().map((item) => item.num);
}
```

### Two Heaps íŒ¨í„´

```javascript
// ì‹¤ì‹œê°„ ì¤‘ì•™ê°’, ìŠ¬ë¼ì´ë”© ìœˆë„ìš° ì¤‘ì•™ê°’ ë“±
// MaxHeap (ì‘ì€ ì ˆë°˜) + MinHeap (í° ì ˆë°˜)

class MedianOfStream {
  constructor() {
    this.maxHeap = new MaxHeap(); // ì‘ì€ ê°’ë“¤
    this.minHeap = new MinHeap(); // í° ê°’ë“¤
  }

  addNumber(num) {
    // ê· í˜• ìœ ì§€ ë¡œì§
    if (this.maxHeap.isEmpty() || num <= this.maxHeap.peek()) {
      this.maxHeap.insert(num);
    } else {
      this.minHeap.insert(num);
    }

    this.rebalance();
  }

  rebalance() {
    if (this.maxHeap.size() > this.minHeap.size() + 1) {
      this.minHeap.insert(this.maxHeap.extractMax());
    } else if (this.minHeap.size() > this.maxHeap.size() + 1) {
      this.maxHeap.insert(this.minHeap.extractMin());
    }
  }
}
```

### ë³‘í•© Kê°œ ì •ë ¬ëœ ë¦¬ìŠ¤íŠ¸

```javascript
function mergeKSortedLists(lists) {
  const minHeap = new PriorityQueue((a, b) => a.val - b.val);

  // ê° ë¦¬ìŠ¤íŠ¸ì˜ ì²« ë²ˆì§¸ ë…¸ë“œë¥¼ í™ì— ì¶”ê°€
  lists.forEach((list) => {
    if (list) minHeap.enqueue(list);
  });

  const dummy = new ListNode(0);
  let current = dummy;

  while (!minHeap.isEmpty()) {
    const node = minHeap.dequeue();
    current.next = node;
    current = current.next;

    if (node.next) {
      minHeap.enqueue(node.next);
    }
  }

  return dummy.next;
}
```

## 10. ì„±ëŠ¥ ìµœì í™” íŒ

### ë©”ëª¨ë¦¬ íš¨ìœ¨ì„±

```javascript
// âŒ ê°ì²´ ë˜í•‘ìœ¼ë¡œ ì¸í•œ ì˜¤ë²„í—¤ë“œ
class HeapNode {
  constructor(value, priority) {
    this.value = value;
    this.priority = priority;
  }
}

// âœ… ë‹¨ìˆœ ë°°ì—´ ë˜ëŠ” ì›ì‹œ íƒ€ì… ì‚¬ìš©
// ë¹„êµ í•¨ìˆ˜ë¡œ ìš°ì„ ìˆœìœ„ ì²˜ë¦¬
class Heap {
  constructor(compareFn) {
    this.heap = [];
    this.compare = compareFn;
  }
}
```

### ìºì‹œ ì¹œí™”ì  êµ¬í˜„

```javascript
// ë°°ì—´ ê¸°ë°˜ í™ì€ ì´ë¯¸ ìºì‹œ ì¹œí™”ì 
// ì—°ì†ëœ ë©”ëª¨ë¦¬ ì ‘ê·¼ íŒ¨í„´
// í¬ì¸í„° ë”°ë¼ê°€ê¸° ì—†ìŒ

// d-ì§„ í™ìœ¼ë¡œ ìºì‹œ íš¨ìœ¨ì„± ë” ê°œì„  ê°€ëŠ¥
class DaryHeap {
  constructor(d = 4) {
    // 4ì§„ í™
    this.d = d;
    this.heap = [];
  }

  getParentIndex(index) {
    return Math.floor((index - 1) / this.d);
  }

  getChildIndex(index, childNum) {
    return this.d * index + childNum + 1;
  }
}
```

## 11. í…ŒìŠ¤íŠ¸ ë° ë””ë²„ê¹…

### í™ ìœ íš¨ì„± ê²€ì¦

```javascript
function validateHeap(heap, isMaxHeap = false) {
  for (let i = 0; i < heap.length; i++) {
    const leftChild = 2 * i + 1;
    const rightChild = 2 * i + 2;

    if (leftChild < heap.length) {
      const valid = isMaxHeap
        ? heap[i] >= heap[leftChild]
        : heap[i] <= heap[leftChild];
      if (!valid) return false;
    }

    if (rightChild < heap.length) {
      const valid = isMaxHeap
        ? heap[i] >= heap[rightChild]
        : heap[i] <= heap[rightChild];
      if (!valid) return false;
    }
  }
  return true;
}
```

### í™ ì‹œê°í™”

```javascript
function visualizeHeap(heap) {
  if (heap.length === 0) return "Empty heap";

  let result = "";
  let level = 0;
  let elementsInLevel = 1;
  let index = 0;

  while (index < heap.length) {
    const indent = "  ".repeat(Math.max(0, 3 - level));
    const elements = [];

    for (let i = 0; i < elementsInLevel && index < heap.length; i++) {
      elements.push(heap[index++]);
    }

    result += `${indent}Level ${level}: ${elements.join("  ")}\n`;
    level++;
    elementsInLevel *= 2;
  }

  return result;
}
```

## 12. ë§ˆë¬´ë¦¬

í™ì€ **ìš°ì„ ìˆœìœ„ê°€ ì¤‘ìš”í•œ ëª¨ë“  ìƒí™©**ì—ì„œ í•µì‹¬ì ì¸ ìë£Œêµ¬ì¡°ë‹¤. íŠ¹íˆ:

### í™ì„ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ê²½ìš°

- **ìµœëŒ“ê°’/ìµœì†Ÿê°’ì„ ìì£¼ ì ‘ê·¼**í•´ì•¼ í•  ë•Œ
- **ìš°ì„ ìˆœìœ„ í**ê°€ í•„ìš”í•  ë•Œ
- **ë¶€ë¶„ ì •ë ¬**ë§Œ í•„ìš”í•  ë•Œ (ì™„ì „ ì •ë ¬ ë¶ˆí•„ìš”)
- **Top K ë¬¸ì œ**ë¥¼ í•´ê²°í•  ë•Œ
- **ì‹¤ì‹œê°„ ì¤‘ì•™ê°’**ì„ ì°¾ì„ ë•Œ

### í™ì„ ì‚¬ìš©í•˜ì§€ ë§ì•„ì•¼ í•˜ëŠ” ê²½ìš°

- **ì™„ì „ ì •ë ¬**ì´ í•„ìš”í•  ë•Œ â†’ ì •ë ¬ ì•Œê³ ë¦¬ì¦˜ ì‚¬ìš©
- **íŠ¹ì • ì›ì†Œ ê²€ìƒ‰**ì´ ìì£¼ í•„ìš”í•  ë•Œ â†’ í•´ì‹œ í…Œì´ë¸”ì´ë‚˜ BST ì‚¬ìš©
- **ìˆœì„œ ìœ ì§€**ê°€ ì¤‘ìš”í•  ë•Œ â†’ ë°°ì—´ì´ë‚˜ ì—°ê²° ë¦¬ìŠ¤íŠ¸ ì‚¬ìš©

### í•µì‹¬ ê¸°ì–µì‚¬í•­

1. **O(1) ìµœëŒ“ê°’/ìµœì†Ÿê°’ ì ‘ê·¼**ì´ í™ì˜ ê°€ì¥ í° ì¥ì 
2. **ì™„ì „ ì´ì§„ íŠ¸ë¦¬ + ë°°ì—´ êµ¬í˜„**ìœ¼ë¡œ ë©”ëª¨ë¦¬ íš¨ìœ¨ì 
3. **ë¶€ë¶„ ì •ë ¬ë§Œ ë³´ì¥** - í˜•ì œ ë…¸ë“œ ê°„ ìˆœì„œëŠ” ë¬´ê´€
4. **buildHeapì€ O(n)** - insert në²ˆë³´ë‹¤ íš¨ìœ¨ì 
5. **JavaScriptì—ì„œëŠ” ì§ì ‘ êµ¬í˜„**í•´ì•¼ í•¨

í™ì„ ì œëŒ€ë¡œ ì´í•´í•˜ë©´ ë§ì€ ì•Œê³ ë¦¬ì¦˜ ë¬¸ì œë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ í•´ê²°í•  ìˆ˜ ìˆë‹¤!
